language: minimal
dist: xenial
sudo: false

env:
  global:
  - GIT_AUTHOR_NAME="Travis CI"
  - GIT_AUTHOR_EMAIL="maintainer@net.ict.e.titech.ac.jp"
  - HUGO_VERSION=0.52
  - secure: "Tq0jgRR1xv+CUF3Ksc5Cc4WHmkN/g0uVqB76rz+RHGqkWpXBPuHIAfwguNChvEqOfCBMnx2227oMpZItMbd9PX9srMITp9kIYy1DZ4BH1Yxg0JHsCdJbUHP+R9NAGQAS+5to+WcPPe1zAfNmOxMsN7laIF2KDdlXwEnqM6Kh1ckM/kiPDa5W1sP4W4M7+wTeL57sENZYnvQ/7M09D6y2HKYarsO/7UlTUqYlmi6nKBXTdcpHJ9ynbtHKmKHLGpeIadiOo6Cd+pin2Lz63nEhB7dmUeBASZTFFmM/TtJ+jvr3gjRmHshUOnPApPtdmfk+/cGH4cSgkx5DBnrY8AydaVHn29PZNJC37VYYTxwJ2/iDHgeVcy6/R1/xzxLV86CJd0F1/3/vHXJ/UCRf2MqgAH8MeP42NZWW6mfydMDuYYvaBh/hcKI8+JPvWSmFuXUAoSvg4Q9cPYdv1DrlWZe4aCgSXI/A/fUWmFxVpJsoYaCYSLiKr/tuPZ143krlWotLqi6MBJ4st95MOng/9K4GGQMQqNZcDzaJJHYk/GrdlxkHUIF6aUHpGqmqFOYDDNsCUY/Gz4Nz0tWfhoqLlIussz7ztTWn1F4iA9DLbTQNfW/ZcETI+4om/cusfsKQcOIn8mlClKl460/jKhW6BXEQk1XXxiKdoFNGTw/3xpuXLP8=" # encrypted GH_TOKEN (Generated by mi2428 on Mar., 2019)

branches:
  only:
    - master

install:
  - |
    wget https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_${HUGO_VERSION}_Linux-64bit.tar.gz
    tar xzf hugo_${HUGO_VERSION}_Linux-64bit.tar.gz

script:
  - |
    mkdir -p themes
    git clone --depth 1 https://github.com/yamaoka-kitaguchi-lab/hugo-room308-bootstrap-theme themes/hugo-room308-bootstrap-theme
    ./hugo -v

deploy:
  provider: pages
  skip_cleanup: true
  local_dir: public
  github-token: $GH_TOKEN
  keep-history: true
  on:
    branch: master
  repo: yamaoka-kitaguchi-lab/www.net.ict.e.titech.ac.jp
  target_branch: master
  fqdn: www.net.ict.e.titech.ac.jp
